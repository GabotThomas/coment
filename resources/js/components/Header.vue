<script setup>
import { useRouter } from "vue-router";
import { RouterLink, RouterView } from "vue-router";
import { computed, onBeforeMount, ref, watch } from "vue";
import { useStore } from "vuex";
import { makeClassName } from "../functions/index";

const router = useRouter();
const props = defineProps({
  user: {
    type: Object,
    required: false,
    default: null,
  }
});

const store = useStore();
const isActive = ref()

const isHeader = computed(() => {
  const currentRoute = router.currentRoute.value.name;
  return RegExp(/Quiz|Error|Login/).test(currentRoute);
})
</script>

<template>
  <template v-if="props.user && !isHeader">
    <nav class="">
      <div class="nav-bar_content">
        <div class="ui nav-bar">
          <button class="">
            <router-link :to="{ name: 'Reglage' }">
              <!-- <img src="../../img/icons/map.svg" alt=""> -->
              <svg :class="makeClassName('active')" width="18" height="18" viewBox="0 0 18 18" fill="none"
                xmlns="http://www.w3.org/2000/svg">
                <path
                  d="M18 9C18 13.9711 13.9711 18 9 18C4.02891 18 0 13.9711 0 9C0 4.02891 4.02891 0 9 0C13.9711 0 18 4.02891 18 9ZM6.25078 2.22152L6.60234 2.8343C6.69727 3.00445 6.75 3.19676 6.75 3.39258V4.84805C6.75 4.98516 6.80625 5.11875 6.90117 5.21367C7.12266 5.43516 7.48125 5.38242 7.67461 5.17148L8.15273 4.57383C8.31797 4.36641 8.60625 4.30312 8.84531 4.42266L9.37969 4.68984C9.49922 4.74961 9.60117 4.78125 9.76641 4.78125C9.99492 4.78125 10.2164 4.68984 10.3781 4.52813L10.5152 4.39102C10.6172 4.25742 10.7754 4.26094 10.902 4.32773L11.932 4.84102C12.2027 4.97813 12.375 5.25586 12.375 5.5582C12.375 5.92734 12.1254 6.25078 11.7668 6.33867L10.5223 6.65156C10.2621 6.71484 9.99141 6.7043 9.70664 6.61992L8.58164 6.24727C8.49727 6.20859 8.37422 6.1875 8.25469 6.1875C8.00859 6.1875 7.73789 6.26836 7.57266 6.41602L6.1875 7.45312C5.83242 7.72031 5.625 8.13516 5.625 8.57812V9.5625C5.625 10.4941 6.38086 11.25 7.3125 11.25H8.4375C8.74687 11.25 9 11.5031 9 11.8125V13.5C9 14.1223 9.50273 14.625 10.125 14.625C10.4801 14.625 10.8141 14.4598 11.025 14.175L11.925 12.9762C12.2168 12.5543 12.375 12.1113 12.375 11.6262V11.2008C12.375 11.0637 12.4664 10.9441 12.6 10.9125L12.7863 10.8668C13.2047 10.7613 13.5 10.3852 13.5 9.95273C13.5 9.67148 13.4016 9.46406 13.2258 9.28828L12.048 8.11055C11.8863 7.94883 11.8863 7.76953 12.048 7.63945C12.2484 7.43906 12.5437 7.36875 12.8145 7.46016L13.3102 7.62539C13.7426 7.73789 14.2137 7.57266 14.4176 7.16484C14.5406 6.91875 14.8113 6.78867 15.0504 6.84141L16.0453 7.03477C15.1559 3.95156 12.3574 1.6875 9 1.6875C8.02617 1.6875 7.06992 1.87734 6.25078 2.22152Z"
                  fill="#3872B2" />
              </svg>
              <p>RÃ©glages</p>
            </router-link>
          </button>
          <button class="">
            <router-link :to="{ name: 'Dashboard' }">
              <!-- <img src="../../img/icons/home.svg" alt=""> -->
              <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path
                  d="M6.32026 16.655V13.9423C6.32026 13.2499 6.8946 12.6885 7.60307 12.6885H10.1929C10.5331 12.6885 10.8594 12.8206 11.1 13.0557C11.3405 13.2909 11.4757 13.6098 11.4757 13.9423V16.655C11.4735 16.9429 11.589 17.2198 11.7966 17.4241C12.0041 17.6284 12.2864 17.7433 12.581 17.7433H14.3479C15.1731 17.7454 15.9652 17.4264 16.5495 16.8568C17.1337 16.2872 17.4621 15.5138 17.4621 14.7073V6.9792C17.4621 6.32766 17.1666 5.70965 16.6553 5.29164L10.6447 0.599607C9.59912 -0.223067 8.10106 -0.196505 7.08672 0.662693L1.21326 5.29164C0.677781 5.69733 0.357735 6.31717 0.341919 6.9792V14.6994C0.341919 16.3805 1.73621 17.7433 3.45615 17.7433H5.18268C5.79445 17.7433 6.29163 17.2609 6.29606 16.6629L6.32026 16.655Z"
                  fill="#3872B2" />
              </svg>
              <p>Accueil</p>
            </router-link>
          </button>
          <button class="">
            <router-link :to="{ name: 'Profile', params: { id: props.user.id } }">
              <!-- <img src="../../img/icons/man.svg" alt=""> -->
              <svg width="19" height="18" viewBox="0 0 19 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path
                  d="M2.19104 18C2.19104 18 0.69104 18 0.69104 16.5C0.69104 15 2.19104 10.5 9.69104 10.5C17.191 10.5 18.691 15 18.691 16.5C18.691 18 17.191 18 17.191 18H2.19104ZM9.69104 9C10.8845 9 12.0291 8.52589 12.873 7.68198C13.7169 6.83807 14.191 5.69347 14.191 4.5C14.191 3.30653 13.7169 2.16193 12.873 1.31802C12.0291 0.474106 10.8845 0 9.69104 0C8.49757 0 7.35297 0.474106 6.50906 1.31802C5.66515 2.16193 5.19104 3.30653 5.19104 4.5C5.19104 5.69347 5.66515 6.83807 6.50906 7.68198C7.35297 8.52589 8.49757 9 9.69104 9Z"
                  fill="#3872B2" />
              </svg>
              <p>Compte</p>
            </router-link>
          </button>
          <!-- <button
            v-on:click="handleLogOut"
            class="">
            <div>Logout</div>
          </button> -->
          <!-- </template> -->
        </div>
      </div>
    </nav>
    <div class="box-shadow"></div>
  </template>
</template>
